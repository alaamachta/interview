{
  "version": "1.0",
  "name": "EscalationForm",
  "template": "{\"type\":\"Card\",\"size\":\"md\",\"theme\":\"dark\",\"background\":\"surface-elevated\",\"children\":[{\"type\":\"Transition\",\"children\":[{%- set _c -%}{%-if submitted -%},{\"type\":\"Col\",\"align\":\"center\",\"gap\":4,\"padding\":5,\"children\":[{\"type\":\"Box\",\"background\":\"green-500\",\"radius\":\"full\",\"padding\":3,\"children\":[{\"type\":\"Icon\",\"name\":\"check\",\"size\":\"3xl\",\"color\":\"white\"}]},{\"type\":\"Title\",\"value\":\"Vielen Dank für Ihr Feedback!\",\"size\":\"md\"},{\"type\":\"Text\",\"value\":\"Ihre Nachricht wurde an Alaa übermittelt. Wenn Sie möchten, können Sie im Chat direkt weitere Fragen stellen.\",\"color\":\"secondary\",\"textAlign\":\"center\"}]}{%-else-%},{\"type\":\"Col\",\"gap\":4,\"children\":[{\"type\":\"Col\",\"gap\":1,\"children\":[{\"type\":\"Title\",\"value\":{{ (title) | tojson }},\"size\":\"sm\"},{\"type\":\"Text\",\"value\":{{ (body) | tojson }},\"color\":\"secondary\"}]},{\"type\":\"Form\",\"onSubmitAction\":{\"type\":\"send_escalation_feedback\"},\"children\":[{\"type\":\"Col\",\"gap\":3,\"children\":[{\"type\":\"Checkbox\",\"name\":\"anonymous\",\"label\":\"Anonym senden\"},{\"type\":\"Col\",\"gap\":1,\"children\":[{\"type\":\"Label\",\"value\":\"Name (optional)\",\"fieldName\":\"name\",\"color\":{% if isAnonymous %}\"tertiary\"{% else %}\"secondary\"{% endif %}},{\"type\":\"Input\",\"name\":\"name\",\"placeholder\":\"Ihr Name\",\"variant\":\"outline\",\"disabled\":{{ (isAnonymous) | tojson }}}]},{\"type\":\"Col\",\"gap\":1,\"children\":[{\"type\":\"Label\",\"value\":\"E-Mail oder Kontakt (optional)\",\"fieldName\":\"contact\"},{\"type\":\"Input\",\"name\":\"contact\",\"placeholder\":\"E-Mail, Telefon oder Handle\",\"inputType\":\"text\",\"variant\":\"outline\"}]},{\"type\":\"Col\",\"gap\":1,\"children\":[{\"type\":\"Label\",\"value\":\"Art der Nachricht\",\"fieldName\":\"feedback_type\"},{\"type\":\"Select\",\"name\":\"feedback_type\",\"options\":{{ (feedbackOptions) | tojson }},\"placeholder\":\"Bitte wählen\",\"clearable\":true}]},{\"type\":\"Col\",\"gap\":1,\"children\":[{\"type\":\"Label\",\"value\":\"Ihre Nachricht oder Frage an Alaa (optional)\",\"fieldName\":\"message\"},{\"type\":\"Textarea\",\"name\":\"message\",\"placeholder\":\"Ihre Nachricht…\",\"rows\":5}]},{\"type\":\"Row\",\"children\":[{\"type\":\"Spacer\"},{\"type\":\"Button\",\"label\":\"Abbrechen\",\"variant\":\"outline\",\"onClickAction\":{\"type\":\"widget.close\"}},{\"type\":\"Button\",\"label\":\"An Alaa senden\",\"style\":\"primary\",\"submit\":true}]}]}]}]}{%-endif-%}{%- endset -%}{{- (_c[1:] if _c and _c[0] == ',' else _c) -}}]}]}",
  "jsonSchema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "properties": {
      "title": {
        "type": "string"
      },
      "body": {
        "type": "string"
      },
      "submitted": {
        "type": "boolean"
      },
      "isAnonymous": {
        "type": "boolean"
      },
      "feedbackOptions": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "value": {
              "type": "string"
            },
            "label": {
              "type": "string"
            },
            "disabled": {
              "type": "boolean"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "value",
            "label"
          ],
          "additionalProperties": false
        }
      }
    },
    "required": [
      "title",
      "body",
      "submitted",
      "isAnonymous",
      "feedbackOptions"
    ],
    "additionalProperties": false
  },
  "outputJsonPreview": {
    "type": "Card",
    "size": "md",
    "theme": "dark",
    "background": "surface-elevated",
    "children": [
      {
        "type": "Transition",
        "children": {
          "type": "Col",
          "gap": 4,
          "children": [
            {
              "type": "Col",
              "gap": 1,
              "children": [
                {
                  "type": "Title",
                  "value": "Leider habe ich dazu keine sicheren Infos.",
                  "size": "sm"
                },
                {
                  "type": "Text",
                  "value": "Wenn Sie möchten, kann ich Ihre Frage und optional eine Nachricht an den echten, menschlichen Alaa Mashta weiterleiten. Alle Angaben sind freiwillig – Sie dürfen auch anonym bleiben.",
                  "color": "secondary"
                }
              ]
            },
            {
              "type": "Form",
              "onSubmitAction": {
                "type": "send_escalation_feedback"
              },
              "children": [
                {
                  "type": "Col",
                  "gap": 3,
                  "children": [
                    {
                      "type": "Checkbox",
                      "name": "anonymous",
                      "label": "Anonym senden"
                    },
                    {
                      "type": "Col",
                      "gap": 1,
                      "children": [
                        {
                          "type": "Label",
                          "value": "Name (optional)",
                          "fieldName": "name",
                          "color": "secondary"
                        },
                        {
                          "type": "Input",
                          "name": "name",
                          "placeholder": "Ihr Name",
                          "variant": "outline",
                          "disabled": false
                        }
                      ]
                    },
                    {
                      "type": "Col",
                      "gap": 1,
                      "children": [
                        {
                          "type": "Label",
                          "value": "E-Mail oder Kontakt (optional)",
                          "fieldName": "contact"
                        },
                        {
                          "type": "Input",
                          "name": "contact",
                          "placeholder": "E-Mail, Telefon oder Handle",
                          "inputType": "text",
                          "variant": "outline"
                        }
                      ]
                    },
                    {
                      "type": "Col",
                      "gap": 1,
                      "children": [
                        {
                          "type": "Label",
                          "value": "Art der Nachricht",
                          "fieldName": "feedback_type"
                        },
                        {
                          "type": "Select",
                          "name": "feedback_type",
                          "options": [
                            {
                              "value": "Verbesserung / Optimierung",
                              "label": "Verbesserung / Optimierung"
                            },
                            {
                              "value": "Störung / technisches Problem",
                              "label": "Störung / technisches Problem"
                            },
                            {
                              "value": "Antwort hat mir nicht gefallen",
                              "label": "Antwort hat mir nicht gefallen"
                            },
                            {
                              "value": "Sonstiges",
                              "label": "Sonstiges"
                            }
                          ],
                          "placeholder": "Bitte wählen",
                          "clearable": true
                        }
                      ]
                    },
                    {
                      "type": "Col",
                      "gap": 1,
                      "children": [
                        {
                          "type": "Label",
                          "value": "Ihre Nachricht oder Frage an Alaa (optional)",
                          "fieldName": "message"
                        },
                        {
                          "type": "Textarea",
                          "name": "message",
                          "placeholder": "Ihre Nachricht…",
                          "rows": 5
                        }
                      ]
                    },
                    {
                      "type": "Row",
                      "children": [
                        {
                          "type": "Spacer"
                        },
                        {
                          "type": "Button",
                          "label": "Abbrechen",
                          "variant": "outline",
                          "onClickAction": {
                            "type": "widget.close"
                          }
                        },
                        {
                          "type": "Button",
                          "label": "An Alaa senden",
                          "style": "primary",
                          "submit": true
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    ]
  },
  "encodedWidget": "eyJpZCI6IjhiYTk0YjBiLTYxYzUtNDM1YS1iZWE0LTc1ZjU1MzI2ZTI3OCIsIm5hbWUiOiJFc2NhbGF0aW9uRm9ybSIsInZpZXciOiI8Q2FyZCBzaXplPVwibWRcIiB0aGVtZT1cImRhcmtcIiBiYWNrZ3JvdW5kPVwic3VyZmFjZS1lbGV2YXRlZFwiPlxuICA8VHJhbnNpdGlvbj5cbiAgICB7c3VibWl0dGVkID8gKFxuICAgICAgPENvbCBhbGlnbj1cImNlbnRlclwiIGdhcD17NH0gcGFkZGluZz17NX0-XG4gICAgICAgIDxCb3ggYmFja2dyb3VuZD1cImdyZWVuLTUwMFwiIHJhZGl1cz1cImZ1bGxcIiBwYWRkaW5nPXszfT5cbiAgICAgICAgICA8SWNvbiBuYW1lPVwiY2hlY2tcIiBzaXplPVwiM3hsXCIgY29sb3I9XCJ3aGl0ZVwiIC8-XG4gICAgICAgIDwvQm94PlxuICAgICAgICA8VGl0bGUgdmFsdWU9XCJWaWVsZW4gRGFuayBmw7xyIElociBGZWVkYmFjayFcIiBzaXplPVwibWRcIiAvPlxuICAgICAgICA8VGV4dFxuICAgICAgICAgIHZhbHVlPVwiSWhyZSBOYWNocmljaHQgd3VyZGUgYW4gQWxhYSDDvGJlcm1pdHRlbHQuIFdlbm4gU2llIG3DtmNodGVuLCBrw7ZubmVuIFNpZSBpbSBDaGF0IGRpcmVrdCB3ZWl0ZXJlIEZyYWdlbiBzdGVsbGVuLlwiXG4gICAgICAgICAgY29sb3I9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgIHRleHRBbGlnbj1cImNlbnRlclwiXG4gICAgICAgIC8-XG4gICAgICA8L0NvbD5cbiAgICApIDogKFxuICAgICAgPENvbCBnYXA9ezR9PlxuICAgICAgICA8Q29sIGdhcD17MX0-XG4gICAgICAgICAgPFRpdGxlIHZhbHVlPXt0aXRsZX0gc2l6ZT1cInNtXCIgLz5cbiAgICAgICAgICA8VGV4dCB2YWx1ZT17Ym9keX0gY29sb3I9XCJzZWNvbmRhcnlcIiAvPlxuICAgICAgICA8L0NvbD5cbiAgICAgICAgPEZvcm0gb25TdWJtaXRBY3Rpb249e3sgdHlwZTogXCJzZW5kX2VzY2FsYXRpb25fZmVlZGJhY2tcIiB9fT5cbiAgICAgICAgICA8Q29sIGdhcD17M30-XG4gICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgbmFtZT1cImFub255bW91c1wiXG4gICAgICAgICAgICAgIGxhYmVsPVwiQW5vbnltIHNlbmRlblwiXG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICA8Q29sIGdhcD17MX0-XG4gICAgICAgICAgICAgIDxMYWJlbFxuICAgICAgICAgICAgICAgIHZhbHVlPVwiTmFtZSAob3B0aW9uYWwpXCJcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBjb2xvcj17aXNBbm9ueW1vdXMgPyBcInRlcnRpYXJ5XCIgOiBcInNlY29uZGFyeVwifVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJJaHIgTmFtZVwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0Fub255bW91c31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvQ29sPlxuXG4gICAgICAgICAgICA8Q29sIGdhcD17MX0-XG4gICAgICAgICAgICAgIDxMYWJlbFxuICAgICAgICAgICAgICAgIHZhbHVlPVwiRS1NYWlsIG9kZXIgS29udGFrdCAob3B0aW9uYWwpXCJcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWU9XCJjb250YWN0XCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgbmFtZT1cImNvbnRhY3RcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRS1NYWlsLCBUZWxlZm9uIG9kZXIgSGFuZGxlXCJcbiAgICAgICAgICAgICAgICBpbnB1dFR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXG4gICAgICAgICAgICAgIC8-XG4gICAgICAgICAgICA8L0NvbD5cblxuICAgICAgICAgICAgPENvbCBnYXA9ezF9PlxuICAgICAgICAgICAgICA8TGFiZWwgdmFsdWU9XCJBcnQgZGVyIE5hY2hyaWNodFwiIGZpZWxkTmFtZT1cImZlZWRiYWNrX3R5cGVcIiAvPlxuICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgbmFtZT1cImZlZWRiYWNrX3R5cGVcIlxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e2ZlZWRiYWNrT3B0aW9uc31cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkJpdHRlIHfDpGhsZW5cIlxuICAgICAgICAgICAgICAgIGNsZWFyYWJsZVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Db2w-XG5cbiAgICAgICAgICAgIDxDb2wgZ2FwPXsxfT5cbiAgICAgICAgICAgICAgPExhYmVsXG4gICAgICAgICAgICAgICAgdmFsdWU9XCJJaHJlIE5hY2hyaWNodCBvZGVyIEZyYWdlIGFuIEFsYWEgKG9wdGlvbmFsKVwiXG4gICAgICAgICAgICAgICAgZmllbGROYW1lPVwibWVzc2FnZVwiXG4gICAgICAgICAgICAgIC8-XG4gICAgICAgICAgICAgIDxUZXh0YXJlYSBuYW1lPVwibWVzc2FnZVwiIHBsYWNlaG9sZGVyPVwiSWhyZSBOYWNocmljaHTigKZcIiByb3dzPXs1fSAvPlxuICAgICAgICAgICAgPC9Db2w-XG5cbiAgICAgICAgICAgIDxSb3c-XG4gICAgICAgICAgICAgIDxTcGFjZXIgLz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGxhYmVsPVwiQWJicmVjaGVuXCJcbiAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXG4gICAgICAgICAgICAgICAgb25DbGlja0FjdGlvbj17eyB0eXBlOiBcIndpZGdldC5jbG9zZVwiIH19XG4gICAgICAgICAgICAgIC8-XG4gICAgICAgICAgICAgIDxCdXR0b24gbGFiZWw9XCJBbiBBbGFhIHNlbmRlblwiIHN0eWxlPVwicHJpbWFyeVwiIHN1Ym1pdCAvPlxuICAgICAgICAgICAgPC9Sb3c-XG4gICAgICAgICAgPC9Db2w-XG4gICAgICAgIDwvRm9ybT5cbiAgICAgIDwvQ29sPlxuICAgICl9XG4gIDwvVHJhbnNpdGlvbj5cbjwvQ2FyZD4iLCJkZWZhdWx0U3RhdGUiOnsidGl0bGUiOiJMZWlkZXIgaGFiZSBpY2ggZGF6dSBrZWluZSBzaWNoZXJlbiBJbmZvcy4iLCJib2R5IjoiV2VubiBTaWUgbcO2Y2h0ZW4sIGthbm4gaWNoIElocmUgRnJhZ2UgdW5kIG9wdGlvbmFsIGVpbmUgTmFjaHJpY2h0IGFuIGRlbiBlY2h0ZW4sIG1lbnNjaGxpY2hlbiBBbGFhIE1hc2h0YSB3ZWl0ZXJsZWl0ZW4uIEFsbGUgQW5nYWJlbiBzaW5kIGZyZWl3aWxsaWcg4oCTIFNpZSBkw7xyZmVuIGF1Y2ggYW5vbnltIGJsZWliZW4uIiwic3VibWl0dGVkIjpmYWxzZSwiaXNBbm9ueW1vdXMiOmZhbHNlLCJmZWVkYmFja09wdGlvbnMiOlt7InZhbHVlIjoiVmVyYmVzc2VydW5nIC8gT3B0aW1pZXJ1bmciLCJsYWJlbCI6IlZlcmJlc3NlcnVuZyAvIE9wdGltaWVydW5nIn0seyJ2YWx1ZSI6IlN0w7ZydW5nIC8gdGVjaG5pc2NoZXMgUHJvYmxlbSIsImxhYmVsIjoiU3TDtnJ1bmcgLyB0ZWNobmlzY2hlcyBQcm9ibGVtIn0seyJ2YWx1ZSI6IkFudHdvcnQgaGF0IG1pciBuaWNodCBnZWZhbGxlbiIsImxhYmVsIjoiQW50d29ydCBoYXQgbWlyIG5pY2h0IGdlZmFsbGVuIn0seyJ2YWx1ZSI6IlNvbnN0aWdlcyIsImxhYmVsIjoiU29uc3RpZ2VzIn1dfSwic3RhdGVzIjpbXSwic2NoZW1hIjoiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIlxuXG5jb25zdCBTZWxlY3RPcHRpb24gPSB6LnN0cmljdE9iamVjdCh7XG4gIHZhbHVlOiB6LnN0cmluZygpLFxuICBsYWJlbDogei5zdHJpbmcoKSxcbiAgZGlzYWJsZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KVxuXG5jb25zdCBXaWRnZXRTdGF0ZSA9IHouc3RyaWN0T2JqZWN0KHtcbiAgdGl0bGU6IHouc3RyaW5nKCksXG4gIGJvZHk6IHouc3RyaW5nKCksXG4gIHN1Ym1pdHRlZDogei5ib29sZWFuKCksXG4gIGlzQW5vbnltb3VzOiB6LmJvb2xlYW4oKSxcbiAgZmVlZGJhY2tPcHRpb25zOiB6LmFycmF5KFNlbGVjdE9wdGlvbiksXG59KVxuXG5leHBvcnQgZGVmYXVsdCBXaWRnZXRTdGF0ZSIsInNjaGVtYVZhbGlkaXR5IjoidmFsaWQiLCJ2aWV3VmFsaWRpdHkiOiJ2YWxpZCIsImRlZmF1bHRTdGF0ZVZhbGlkaXR5IjoidmFsaWQifQ"
}